<svg height="804" viewBox="0 0 1132 804" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1132" xmlns:ev="http://www.w3.org/2001/xml-events"><defs/><g id="page1" transform="translate(5.5,5.5)"><rect height="794" fill="#ffffff" y="0" width="1123" x="0"/><path fill="#f4f9f7" id="shape1" stroke-width="3" transform="translate(813,106)" d="M151,502L151,11C151,4.9,146.1,0,140,0L11,0C4.9,0,0,4.9,0,11L0,502C0,508.1,4.9,513,11,513L140,513C146.1,513,151,508.1,151,502z" stroke="#35b58f" fill-rule="evenodd"/><g id="shape2" transform="translate(829.84,295.8)"><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:13pt;font-weight:bold"><tspan y="22.9" x="28.2">js vm / </tspan><tspan y="46.9" x="36.2">stack</tspan></text></g><g id="shape3" transform="translate(689.91,666.55)"><path fill="#f4f9f7" stroke-width="3" d="M124.2,27.8C130.8,27.8,136.2,22.4,136.2,15.8L136.2,12C136.2,5.4,130.8,0,124.2,0L12,0C5.4,0,0,5.4,0,12L0,15.8C0,22.4,5.4,27.8,12,27.8L124.2,27.8z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="18" x="55.3">r++</tspan></text></g><g id="shape4" transform="translate(820.75,581.13)"><path fill="#f4f9f7" stroke-width="3" d="M124.2,27.8C130.8,27.8,136.2,22.4,136.2,15.8L136.2,12C136.2,5.4,130.8,0,124.2,0L12,0C5.4,0,0,5.4,0,12L0,15.8C0,22.4,5.4,27.8,12,27.8L124.2,27.8z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="18" x="16.1">await write(text)</tspan></text></g><g id="shape5" transform="translate(820.75,543.13)"><path fill="#f4f9f7" stroke-width="3" d="M124.2,27.8C130.8,27.8,136.2,22.4,136.2,15.8L136.2,12C136.2,5.4,130.8,0,124.2,0L12,0C5.4,0,0,5.4,0,12L0,15.8C0,22.4,5.4,27.8,12,27.8L124.2,27.8z" stroke="#35b58f" stroke-dasharray="6,4" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="18" x="15.3">let text = 'r: ' + r</tspan></text></g><g id="shape6" transform="translate(820.75,505.13)"><path fill="#f4f9f7" stroke-width="3" d="M124.2,27.8C130.8,27.8,136.2,22.4,136.2,15.8L136.2,12C136.2,5.4,130.8,0,124.2,0L12,0C5.4,0,0,5.4,0,12L0,15.8C0,22.4,5.4,27.8,12,27.8L124.2,27.8z" stroke="#35b58f" stroke-dasharray="6,4" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="18" x="17.3">let r = doSync()</tspan></text></g><g id="shape7" transform="translate(713,382.3)"><path fill="#5c9ae1" stroke-width="3" d="M0,45C0,20.1,20.1,0,45,0C69.9,0,90,20.1,90,45C90,69.9,69.9,90,45,90C20.1,90,0,69.9,0,45z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#ffffff;font-family:微软雅黑;font-size:10pt"><tspan y="49.1" x="14.2">file proxy</tspan></text></g><g id="shape8" transform="translate(813,594.74)"><path fill="none" stroke-width="2" d="M0,0C-11,.1,-22.1,.2,-31.3,-7.9C-40.5,-16.1,-47.8,-32.4,-51.4,-52.8C-54.7,-70.9,-55,-92.3,-55,-114.1" stroke="#fd8851" stroke-dasharray="6,4"/><path fill="#fd8851" stroke-linecap="round" stroke-width="1" d="M-59.3,-114L-55,-122.4L-50.8,-114L-59.3,-114" stroke="#fd8851"/><rect height="18.4" fill="#ffffff" y="-62" width="8" x="-54.2"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="-47.6" x="-54.2">2</tspan></text></g><g id="shape9" transform="translate(758,382.3)"><path fill="none" stroke-width="2" d="M0,0C0,-19.9,.1,-39.9,-3.8,-56.5C-7.7,-73.1,-15.6,-86.3,-25.4,-92.9C-33.2,-98.1,-42.2,-99.1,-51.5,-99.3" stroke="#fd8851" stroke-dasharray="6,4"/><path fill="#fd8851" stroke-linecap="round" stroke-width="1" d="M-50.5,-95L-59,-99.3L-50.5,-103.5L-50.5,-95" stroke="#fd8851"/></g><g id="shape10" transform="translate(479.62,103.56)"><path fill="none" stroke-width="2" d="M0,0C41,2.3,81.9,4.7,117,27.3C152.1,49.9,181.3,92.7,216.4,115.3C249.2,136.4,287.2,139.8,325.5,142.1" stroke="#f17663" stroke-dasharray="6,4"/><path fill="#f17663" stroke-linecap="round" stroke-width="1" d="M325.2,137.8L333.4,142.6L324.7,146.3L325.2,137.8" stroke="#f17663"/><rect height="18.4" fill="#ffffff" y="90.2" width="8" x="193.9"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="104.6" x="193.9">1</tspan></text></g><g id="shape11" transform="translate(642.5,29.06)"><path fill="#5c9ae1" d="M0,0L141,0L141,149L0,149L0,0z" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#ffffff;font-family:微软雅黑;font-size:10pt"><tspan y="17.6" x="3.2">async () => {</tspan><tspan y="36" x="3.2">    let r = doSync()</tspan><tspan y="54.4" x="3.2">    let text = 'r: ' + r</tspan><tspan y="72.8" x="3.2">    await write(text)</tspan><tspan y="91.2" x="3.2">    r++</tspan><tspan y="109.6" x="3.2">    return r</tspan><tspan y="128" x="3.2">}</tspan></text></g><g id="shape12" transform="translate(490,583.01)"><path fill="none" stroke-width="2" d="M0,0C39.7,.4,79.4,.7,113.4,4.1C147.4,7.5,175.6,14,209.6,17.4C241.4,20.6,278.1,21.1,315.2,21.5" stroke="#d3ac35" stroke-dasharray="6,4"/><path fill="#d3ac35" stroke-linecap="round" stroke-width="1" d="M314.6,17.2L323,21.5L314.5,25.7L314.6,17.2" stroke="#d3ac35"/><rect height="18.4" fill="#ffffff" y="-8.1" width="21.6" x="78.8"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="6.3" x="78.8">n-1</tspan></text></g><g id="shape13" transform="translate(689.91,704.55)"><path fill="#f4f9f7" stroke-width="3" d="M124.2,27.8C130.8,27.8,136.2,22.4,136.2,15.8L136.2,12C136.2,5.4,130.8,0,124.2,0L12,0C5.4,0,0,5.4,0,12L0,15.8C0,22.4,5.4,27.8,12,27.8L124.2,27.8z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="18" x="44.5">return r</tspan></text></g><g id="shape14" transform="translate(359.62,73)"><path fill="#f4f9f7" stroke-width="3" d="M120,50.1L120,11C120,4.9,115.1,0,109,0L11,0C4.9,0,0,4.9,0,11L0,50.1C0,56.2,4.9,61.1,11,61.1L109,61.1C115.1,61.1,120,56.2,120,50.1z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="34.7" x="27.2">timer 阶段</tspan></text></g><g id="shape15" transform="translate(562,254.7)"><path fill="#f4f9f7" stroke-width="3" d="M134,45.3L134,11C134,4.9,129.1,0,123,0L11,0C4.9,0,0,4.9,0,11L0,45.3C0,51.4,4.9,56.3,11,56.3L123,56.3C129.1,56.3,134,51.4,134,45.3z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="23.1" x="11.4">pending callback </tspan><tspan y="41.5" x="9">阶段，延时 io 回调</tspan></text></g><g id="shape16" transform="translate(562,406)"><path fill="#f4f9f7" stroke-width="3" d="M134,45.3L134,11C134,4.9,129.1,0,123,0L11,0C4.9,0,0,4.9,0,11L0,45.3C0,51.4,4.9,56.3,11,56.3L123,56.3C129.1,56.3,134,51.4,134,45.3z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="32.6" x="11.8">idle prepare 阶段</tspan></text></g><g id="shape17" transform="translate(339,538.88)"><path fill="#f4f9f7" stroke-width="3" d="M151,50.1L151,11C151,4.9,146.1,0,140,0L11,0C4.9,0,0,4.9,0,11L0,50.1C0,56.2,4.9,61.1,11,61.1L140,61.1C146.1,61.1,151,56.2,151,50.1z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="25.6" x="47.1">poll 阶段</tspan><tspan y="44" x="5.9">io 回调，计算阻塞时间</tspan></text></g><g id="shape18" transform="translate(151,420)"><path fill="#f4f9f7" stroke-width="3" d="M134,45.3L134,11C134,4.9,129.1,0,123,0L11,0C4.9,0,0,4.9,0,11L0,45.3C0,51.4,4.9,56.3,11,56.3L123,56.3C129.1,56.3,134,51.4,134,45.3z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="22.7" x="34.6">check阶段</tspan><tspan y="41.1" x="6.6">setImmediate 回调</tspan></text></g><g id="shape19" transform="translate(154.5,271)"><path fill="#f4f9f7" stroke-width="3" d="M127,39L127,11C127,4.9,122.1,0,116,0L11,0C4.9,0,0,4.9,0,11L0,39C0,45.1,4.9,50,11,50L116,50C122.1,50,127,45.1,127,39z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="19.6" x="30.7">close 阶段</tspan><tspan y="38" x="15.1">关闭 close 回调</tspan></text></g><g id="shape20" transform="translate(158,144)"><path fill="#f4f9f7" stroke-width="3" d="M60,80L120,40L60,0L0,40L60,80z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="44.1" x="19.2">是否还有任务</tspan></text></g><g id="shape21" transform="translate(54,50)"><path fill="#f4f9f7" stroke-width="3" d="M0,40C0,17.9,17.9,0,40,0C62.1,0,80,17.9,80,40C80,62.1,62.1,80,40,80C17.9,80,0,62.1,0,40z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="44.1" x="26.4">退出</tspan></text></g><path fill="#f4f9f7" id="shape22" stroke-width="3" transform="translate(332.61,239.92)" d="M187.4,176.4L187.4,11C187.4,4.9,182.5,0,176.4,0L11,0C4.9,0,0,4.9,0,11L0,176.4C0,182.5,4.9,187.4,11,187.4L176.4,187.4C182.5,187.4,187.4,182.5,187.4,176.4z" stroke="#35b58f" fill-rule="evenodd"/><g id="shape23" transform="translate(359.62,258.7)"><path fill="#f4f9f7" stroke-width="3" d="M120,56.3C126.6,56.3,132,50.9,132,44.3L132,12C132,5.4,126.6,0,120,0L12,0C5.4,0,0,5.4,0,12L0,44.3C0,50.9,5.4,56.3,12,56.3L120,56.3z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="22.7" x="12">process.nextTick</tspan><tspan y="41.1" x="38.8">任务队列</tspan></text></g><g id="shape24" transform="translate(358,353.7)"><path fill="#f4f9f7" stroke-width="3" d="M120,56.3C126.6,56.3,132,50.9,132,44.3L132,12C132,5.4,126.6,0,120,0L12,0C5.4,0,0,5.4,0,12L0,44.3C0,50.9,5.4,56.3,12,56.3L120,56.3z" stroke="#35b58f" fill-rule="evenodd"/><text xml:space="preserve" style="fill:#303030;font-family:微软雅黑;font-size:10pt"><tspan y="22.7" x="39.6">Promise</tspan><tspan y="41.1" x="38.8">任务队列</tspan></text></g><g id="shape25" transform="translate(424,315)"><path fill="none" stroke-width="2" d="M0,0L0,30.2" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M4.2,30.2L0,38.7L-4.2,30.2L4.2,30.2" stroke="#454545"/></g><g id="shape26" transform="translate(218,144)"><path fill="none" stroke-width="2" d="M0,0C-0.1,-8.1,-0.2,-16.2,9.2,-23C18.6,-29.8,37.4,-35.1,61.1,-37.8C82.5,-40.2,107.9,-40.4,133.6,-40.4" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M133.1,-44.7L141.6,-40.4L133.1,-36.2L133.1,-44.7" stroke="#454545"/><rect height="18.4" fill="#ffffff" y="-45.1" width="13.6" x="35.7"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="-30.7" x="35.7">是</tspan></text></g><g id="shape27" transform="translate(479.62,103.56)"><path fill="none" stroke-width="2" d="M0,0C30,-0.1,60,-0.2,85,9.8C109.9,19.8,129.8,39.9,139.7,65.2C148.7,88.1,149.4,115.2,149.4,142.8" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M153.6,142.7L149.4,151.1L145.2,142.6L153.6,142.7" stroke="#454545"/></g><g id="shape28" transform="translate(629,311)"><path fill="none" stroke-width="2" d="M0,0C0,5.3,0,10.6,0,23.8C0,36.9,0,58.1,0,71.3C0,78.9,0,83.9,0,87.8" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M4.2,86.5L0,95L-4.2,86.5L4.2,86.5" stroke="#454545"/></g><g id="shape29" transform="translate(629,462.3)"><path fill="none" stroke-width="2" d="M0,0C.1,21.5,.2,43,-9,60.9C-18.2,78.8,-36.7,93.1,-59.9,100.2C-80.9,106.6,-105.6,107.2,-130.7,107.2" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-130.5,111.4L-139,107.1L-130.5,102.9L-130.5,111.4" stroke="#454545"/></g><g id="shape30" transform="translate(339,569.44)"><path fill="none" stroke-width="2" d="M0,0C-24.3,.1,-48.6,.1,-68.8,-6C-89,-12.2,-105.1,-24.6,-113.2,-40.2C-120.1,-53.6,-121,-69.3,-121,-85.4" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-125.3,-84.7L-121,-93.1L-116.8,-84.6L-125.3,-84.7" stroke="#454545"/></g><g id="shape31" transform="translate(218,420)"><path fill="none" stroke-width="2" d="M0,0C0,-5.5,0,-11,0,-24.8C-0,-38.5,0,-60.5,0,-74.3C0,-82.4,0,-87.7,0,-91.8" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-4.2,-90.5L0,-99L4.2,-90.5L-4.2,-90.5" stroke="#454545"/></g><g id="shape32" transform="translate(218,271)"><path fill="none" stroke-width="2" d="M0,0C0,-2.6,0,-5.2,0,-11.8C-0,-18.3,0,-28.7,0,-35.3C0,-37,0,-38.5,0,-39.8" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-4.2,-38.5L0,-47L4.2,-38.5L-4.2,-38.5" stroke="#454545"/></g><g id="shape33" transform="translate(158,184)"><path fill="none" stroke-width="2" d="M0,0C-10.4,-1.5,-20.8,-3.1,-19.6,-18C-18.4,-32.9,-5.6,-61.1,-4.4,-76C-3.5,-87.2,-9.1,-90.9,-16.4,-92.6" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-16.4,-88.3L-24,-94L-14.9,-96.7L-16.4,-88.3" stroke="#454545"/><rect height="18.4" fill="#ffffff" y="-57.8" width="13.6" x="-17.7"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="-43.4" x="-17.7">否</tspan></text></g><g id="shape34" transform="translate(479.62,103.56)"><path fill="none" stroke-width="2" d="M0,0C15,14.6,30,29.2,39.8,45.2C49.6,61.2,54.3,78.5,53,94.5C51.9,108.1,46.5,120.8,40.4,133.2" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M44.8,134L37.3,139.7L37.2,130.2L44.8,134" stroke="#454545"/></g><g id="shape35" transform="translate(629,311)"><path fill="none" stroke-width="2" d="M0,0C-13.4,1.3,-26.8,2.6,-38.3,15.1C-49.7,27.6,-59.3,51.4,-70.7,63.9C-80.1,74.1,-90.7,76.8,-101.6,78.2" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-100.1,82.3L-109,79L-101,73.9L-100.1,82.3" stroke="#454545"/></g><g id="shape36" transform="translate(629,462.3)"><path fill="none" stroke-width="2" d="M0,0C-21.2,9.5,-42.4,19,-65.6,21.6C-88.8,24.2,-113.9,19.9,-137.1,9.3C-158.1,-0.3,-177.5,-15,-196.7,-30.2" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-198.7,-26.4L-202.7,-35L-193.4,-33L-198.7,-26.4" stroke="#454545"/></g><g id="shape37" transform="translate(339,569.44)"><path fill="none" stroke-width="2" d="M0,0C-12.3,-18.2,-24.7,-36.4,-27,-59.4C-29.3,-82.4,-21.6,-110.2,-16,-125.4C-13.3,-132.8,-11.1,-137.2,-9.2,-140.2" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M-12.7,-142.7L-3.7,-146L-6.5,-136.9L-12.7,-142.7" stroke="#454545"/></g><g id="shape38" transform="translate(218,420)"><path fill="none" stroke-width="2" d="M0,0C14.1,-1.4,28.2,-2.8,40.2,-16.5C52.3,-30.2,62.3,-56.2,74.4,-69.9C84.4,-81.2,95.8,-84.1,107.4,-85.6" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M105.7,-89.7L114.6,-86.4L106.6,-81.2L105.7,-89.7" stroke="#454545"/></g><g id="shape39" transform="translate(218,271)"><path fill="none" stroke-width="2" d="M0,0C12.4,-11.9,24.8,-23.9,38.4,-31.6C51.9,-39.3,66.7,-42.9,80.2,-41.7C91.5,-40.7,102,-36.4,112.3,-31.5" stroke="#454545"/><path fill="#454545" stroke-linecap="round" stroke-width="1" d="M112.7,-36L118.6,-28.5L109.1,-28.3L112.7,-36" stroke="#454545"/></g><g id="shape40" transform="translate(464.01,134.13)"><path fill="none" stroke-width="2" d="M0,0C16.4,90.1,32.7,180.2,56.5,257.3C80.2,334.3,111.3,398.4,161.3,431.4C209.4,463.1,275,466,341.2,467.8" stroke="#5933b8" stroke-dasharray="6,4"/><path fill="#5933b8" stroke-linecap="round" stroke-width="1" d="M340.6,463.5L349,468L340.4,472L340.6,463.5" stroke="#5933b8"/><rect height="18.4" fill="#ffffff" y="359.4" width="21.6" x="94.5"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="373.8" x="94.5">n-2</tspan></text></g><g id="shape41" transform="translate(647,312.3)"><path fill="none" stroke-width="2" d="M0,0C5.8,22.4,11.7,44.7,10,118C8.3,191.3,-0.8,315.5,24,354C48,391.3,103.8,348.2,160.7,302.6" stroke="#fd8851" stroke-dasharray="6,4"/><path fill="#fd8851" stroke-linecap="round" stroke-width="1" d="M157,300.1L166.3,298.1L162.3,306.7L157,300.1" stroke="#fd8851"/><rect height="18.4" fill="#ffffff" y="184.6" width="8" x="4.6"/><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="199" x="4.6">n</tspan></text></g><g id="shape42" transform="translate(370,203)"><text xml:space="preserve" style="fill:#454545;font-family:微软雅黑;font-size:10pt"><tspan y="23.8" x="26">微任务队列</tspan></text></g></g></svg>